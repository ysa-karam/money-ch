<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ’° Ù†Ø¸Ø§Ù… Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø§Ù„</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body { background: linear-gradient(135deg,#74ebd5,#ACB6E5); min-height:100vh; }
  .card { border-radius: 16px; box-shadow: 0 0 15px #0002; }
  table td, table th { vertical-align: middle !important; }
</style>
</head>
<body class="p-3">

<div class="container">
  <h1 class="text-center mb-4 text-white">ğŸ’° Ù†Ø¸Ø§Ù… Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø§Ù„</h1>

  <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù…Ù„ÙŠØ© -->
  <div class="card mb-4">
    <div class="card-header fw-bold">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ©</div>
    <div class="card-body row g-2">
      <div class="col-md-3">
        <input id="opName" class="form-control" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©">
      </div>
      <div class="col-md-3">
        <input id="opDate" type="date" class="form-control">
      </div>
      <div class="col-md-2">
        <input id="opPrice" type="number" class="form-control" placeholder="Ø§Ù„Ø³Ø¹Ø±">
      </div>
      <div class="col-md-2">
        <select id="opType" class="form-select">
          <option value="in">Ø£Ø®Ø°</option>
          <option value="out">Ø¯ÙØ¹</option>
        </select>
      </div>
      <div class="col-md-2 d-grid">
        <button class="btn btn-success" onclick="addOperation()">Ø¥Ø¶Ø§ÙØ©</button>
      </div>
    </div>
  </div>

  <!-- Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ -->
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header fw-bold d-flex justify-content-between align-items-center">
          <span>ğŸ“‹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</span>
          <div>
            <button class="btn btn-warning btn-sm me-2" onclick="resetAccount()">ğŸ”„ ØªØµÙÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨</button>
            <button class="btn btn-danger btn-sm" onclick="deleteAll()">ğŸ—‘ Ø­Ø°Ù Ø§Ù„ÙƒÙ„</button>
          </div>
        </div>
        <div class="card-body table-responsive">
          <table class="table table-striped table-hover align-middle">
            <thead class="table-primary">
              <tr>
                <th>Ø§Ù„Ø§Ø³Ù…</th>
                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                <th>Ø§Ù„Ø³Ø¹Ø±</th>
                <th>Ø§Ù„Ù†ÙˆØ¹</th>
                <th>Ø­Ø°Ù</th>
              </tr>
            </thead>
            <tbody id="opTableBody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ -->
  <div class="card mt-4">
    <div class="card-header fw-bold">ğŸ’¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</div>
    <div class="card-body">
      <div class="d-flex flex-column flex-md-row justify-content-between align-items-center">
        <h4>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="remaining" class="text-success">0</span> ğŸ’µ</h4>
        <button class="btn btn-primary mt-3 mt-md-0" onclick="calculateRemaining()">ğŸ§® Ø§Ø­Ø³Ø¨ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</button>
      </div>
    </div>
  </div>

</div>

<script>
  let operations = JSON.parse(localStorage.getItem('operations') || '[]');

  function saveToLocalStorage(){
    localStorage.setItem('operations', JSON.stringify(operations));
  }

  function renderTable(){
    const tbody = document.getElementById('opTableBody');
    tbody.innerHTML = '';
    operations.forEach((op, index) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${op.name}</td>
        <td>${op.date}</td>
        <td>${op.price}</td>
        <td>${op.type === 'in' ? 'Ø£Ø®Ø°' : 'Ø¯ÙØ¹'}</td>
        <td>
          <button class="btn btn-danger btn-sm" onclick="deleteOperation(${index})">ğŸ—‘</button>
        </td>
      `;
      tbody.appendChild(tr);
    });
    calculateRemaining();
  }

  function addOperation(){
    const name = document.getElementById('opName').value.trim();
    const date = document.getElementById('opDate').value;
    const price = parseFloat(document.getElementById('opPrice').value);
    const type = document.getElementById('opType').value;

    if(!name || !date || isNaN(price)){
      alert('âš ï¸ Ø£Ø¯Ø®Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
      return;
    }

    operations.push({ name, date, price, type });
    saveToLocalStorage();
    renderTable();
    document.getElementById('opName').value='';
    document.getElementById('opDate').value='';
    document.getElementById('opPrice').value='';
  }

  function deleteOperation(index){
    operations.splice(index,1);
    saveToLocalStorage();
    renderTable();
  }

  function calculateRemaining(){
    let totalIn = 0;
    let totalOut = 0;
    operations.forEach(op => {
      if(op.type === 'in') totalIn += op.price;
      else totalOut += op.price;
    });
    document.getElementById('remaining').textContent = totalIn - totalOut;
  }

  function resetAccount(){
    if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØµÙÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨ØŸ')){
      operations = [];
      saveToLocalStorage();
      renderTable();
    }
  }

  function deleteAll(){
    if(confirm('âš ï¸ Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù ÙƒÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§ØªØŸ')){
      operations = [];
      saveToLocalStorage();
      renderTable();
    }
  }

  renderTable();
</script>

</body>
</html>
